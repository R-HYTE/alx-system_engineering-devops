#!/usr/bin/env bash
# This script configures Nginx to include a custom HTTP header, "X-Served-By,"
# in its HTTP responses. The value of the header will be the hostname of the
# server Nginx is running on.

# Update the package lists
sudo apt-get update

# Install Nginx
sudo apt-get install -y nginx

# Define the custom header configuration
custom_header_config='
    add_header X-Served-By $hostname;
'

# Add the custom header configuration to the Nginx default site configuration
echo "$custom_header_config" | sudo tee -a /etc/nginx/sites-available/default > /dev/null

# Restart Nginx to apply the changes
sudo systemctl restart nginx

# Print a message indicating that the configuration is complete
echo "Nginx has been configured to include custom header X-Served-By with the server's hostname."
