## Enhanced Infrastructure Design:

### Servers:

1. **User Accessing Website:**
   - A user wants to access the website www.foobar.com.

2. **Domain Name (foobar.com):**
   - The domain name (foobar.com) is registered and configured with a www record pointing to the load balancer's IP address.

### Load-Balancer (HAproxy):

- **Why it's added:**
  - A load balancer (HAproxy) is added to distribute incoming traffic across multiple servers, ensuring better performance, scalability, and redundancy.

- **Distribution Algorithm:**
  - The load balancer is configured with a round-robin distribution algorithm. It works by sequentially routing requests to the available servers in a circular order, evenly distributing the load.

- **Active-Active or Active-Passive Setup:**
  - The load balancer is configured in an Active-Active setup. In this configuration, all servers actively handle traffic simultaneously, providing increased capacity and fault tolerance.

### Web Server (Nginx):

- **Why it's added:**
  - Nginx serves as the web server, managing static content and acting as a reverse proxy. It helps improve performance and handles SSL termination.

### Application Server:

- **Why it's added:**
  - The application server executes dynamic code, processing requests generated by users and interacting with the database.

### Application Files (Code Base):

- **Why it's added:**
  - The application codebase contains the logic and functionality of the website. It is executed by the application server.

### Database (MySQL - Primary-Replica Cluster):

- **Why it's added:**
  - A Primary-Replica (Master-Slave) cluster is implemented to ensure data redundancy, high availability, and fault tolerance.

- **Primary-Replica Cluster:**
  - The Primary node handles write operations (INSERT, UPDATE, DELETE), and the Replica nodes replicate data from the Primary node. Read operations (SELECT) can be distributed across the Replica nodes.

- **Difference Between Primary and Replica:**
  - The Primary node is the authoritative source for write operations and ensures data consistency. Replica nodes provide read scalability and can be used to offload read queries from the Primary node.

### Issues with the Infrastructure:

1. **Single Points of Failure (SPOF):**
   - The infrastructure still has potential SPOFs:
      - Load Balancer: If the load balancer fails, it could disrupt the entire traffic distribution.
      - Single Database Server: If the Primary database server fails, it could impact data availability.
      - Single Application Server: If the application server fails, it may affect the dynamic functionality of the website.

2. **Security Issues:**
   - Lack of Firewall: No mention of a firewall poses a security risk. A firewall is essential for controlling incoming and outgoing traffic and preventing unauthorized access.
   - No HTTPS: The absence of HTTPS leaves data transmission unencrypted, exposing users to security threats. Implementing HTTPS is crucial for secure data transfer.

3. **No Monitoring:**
   - Without monitoring tools, it's challenging to identify performance issues, security breaches, or potential failures in real-time. Implementing monitoring solutions is vital for proactive issue detection and resolution.

